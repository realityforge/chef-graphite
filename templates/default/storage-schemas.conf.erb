# Carbon storage aggregation. See http://readthedocs.org/docs/graphite/en/latest/config-carbon.html#storage-schemas-conf
#
# Generated by Chef

# Schema definitions for Whisper files. Entries are scanned in order,
# and first match wins. This file is scanned for changes every 60 seconds.
#
#  [name]
#  pattern = regex
#  retentions = timePerPoint:timeToStore, timePerPoint:timeToStore, ...
#
#
<% node['graphite']['carbon']['storage_schemas'].sort_by { |key, config| (config['priority'] || 0) }.sort_by{ |key, config| "key" }.each do |key, config| %>
[<%= key %>]
<% if config['pattern'] -%>
pattern = <%= config['pattern'] %>
<% end %>
<% if config['retentions'] -%>
retentions = <%= config['retentions'] %>
<% end %>

<% end %>
